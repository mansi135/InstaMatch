{% extends 'base.html' %}

{% block title %}Accepted Connections{% endblock %}

{% block head %}
    <style>
      #map {
        width: 50%;
        height: 400px;
      }
    </style>
{% endblock %}

{% block content %}

    <h3>Accepted Members</h3>
    <div id="map"></div>

    <!-- <ul>
      {% for one in sent_accepted %}
        <li>          
            <p> <img src="/{{ UPLOAD_FOLDER }}{{ received.source_user.pictures[0].picture_url }}" width="200" height="200"> </p>
            <button id="a_{{ received.source_userid }}" onclick="acceptPass({{ received.source_userid }}, 'accept')">Accept</button>
            <button id="p_{{ received.source_userid }}" onclick="acceptPass({{ received.source_userid }}, 'pass')">
            Pass</button> 
            <div id="msg_{{ received.source_userid }}"></div>
            <p> UserId :{{ received.source_user.user_id }} </p>
            <p> Name :{{ received.source_user.fname }} {{ received.source_user.lname }} </p>
            <p> Height : {{ received.source_user.personal.height }}cm </p>
            <p> Religion : {{ received.source_user.personal.religion.religion_name }} </p>
            <p> Ethnicity : {{ received.source_user.personal.ethnicity.ethnicity_name }} </p>
            <p> Status : <span id="status_{{ received.source_userid }}" data-id="{{ received.source_userid }}">
            {{ received.status }}</span> </p>
        </li>
    
      {% endfor %}
    </ul> -->

{% endblock %}

{% block javascript %}
    <script>
        
        function initMap() {
            let mylocation = {lat: {{ lat_lng[3]['lat'] }}, lng: {{ lat_lng[3]['lng'] }} };
            let map = new google.maps.Map(document.getElementById('map'), {
              zoom: 5,
              center: mylocation
            });

            {% for l in lat_lng %}
                var icon = {
                    url: "/static/images/me.png", // url
                    scaledSize: new google.maps.Size(25, 25), // scaled size
                    origin: new google.maps.Point(0,0), // origin
                    anchor: new google.maps.Point(0, 0) // anchor
                };
                var image = 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png';
                var m = {lat: {{ l['lat'] }}, lng: {{ l['lng'] }} };
                var marker = new google.maps.Marker({
                  position: m,
                  map: map,
                //  icon: image
                }); 
            {% endfor %}
                  
          }
    </script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key={{ GOOGLE_MAPS_API_KEY }}&callback=initMap">
    </script>
{% endblock %}