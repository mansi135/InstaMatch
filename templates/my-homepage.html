{% extends 'base.html' %}

{% block title %}My InstaMatch{% endblock %}

{% block head %}
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
      $( function() {

        $( "#slider-range-age" ).slider({
          range: true,
          min: 15,
          max: 70,
          values: [ 25, 45 ],
          slide: function( event, ui ) {
            $( "#age" ).val( ui.values[ 0 ] + "-" + ui.values[ 1 ] );
          }
        });
        $( "#age" ).val( $( "#slider-range-age" ).slider( "values", 0 ) +
          " - " + $( "#slider-range-age" ).slider( "values", 1 ) );

        $( "#slider-range-height" ).slider({
          range: true,
          min: 120,
          max: 200,
          values: [ 150, 170 ],
          slide: function( event, ui ) {
            $( "#height" ).val( ui.values[ 0 ] + "-" + ui.values[ 1 ] );
          }
        });
        $( "#height" ).val( $( "#slider-range-height" ).slider( "values", 0 ) +
          " - " + $( "#slider-range-height" ).slider( "values", 1 ) );

        $( "#slider-distance" ).slider({
          min: 0,
          max: 1000,
          values: [ 50 ],
          slide: function( event, ui ) {
            $( "#distance" ).val( ui.values[ 0 ] );
          }
        });
        $( "#distance" ).val( $( "#slider-distance" ).slider( "values", 0 ) + " miles");

      } );
  </script>
  <style>   
        .ui-slider .ui-slider-handle {

            cursor: default;
            height: 1.2em;
            position: absolute;
            width: 1.2em;
            z-index: 2;
        }
        .ui-slider {
            width : 200px;
        }
  </style>
{% endblock %}

{% block content %}
    

     <div class="container-fluid" id="search-users">
       <div class="row">
            <h2 class="text-center"> Welcome {{ session['fname'] }} </h2>
       </div>
       <div class="row">
         <div class="col-lg-2" id="filters"> 
            <form action="/search">
                <p>
                  <label for="age">Age Range:</label>
                  <input type="text" id="age" name="age" readonly style="border:0; color:#f6931f; font-weight:bold;">
                </p> 
                <div id="slider-range-age"></div>
                <br>
                <p>
                  <label for="height">Height Range in cm:</label>
                  <input type="text" id="height" name="height" readonly style="border:0; color:#f6931f; font-weight:bold;">
                </p>
                <div id="slider-range-height"></div>    
                <br>
                <p>
                  <label for="distance">Distance from me:</label>
                  <input type="text" id="distance" name="distance" readonly style="border:0; color:#f6931f; font-weight:bold;">
                </p>
                <div id="slider-distance"></div>    

                <p>
                <label>Gender<br>
                    <input type="radio" name="gender" value="M" checked> Male<br>
                    <input type="radio" name="gender" value="F"> Female<br>
                    <input type="radio" name="gender" value="O"> Other
                </label><br><br>
                </p>
    
                <p>
                <label>Ethnicity<br>
                    <input type="radio" id="eth_d_matter" name="eth" value=0 checked> Doesn't Matter
                    <input type="radio" id="eth_matter" name="eth" value=1> Matters<br>
                    <div id="show-ethnicities">
                        <select name="ethnicities" multiple>
                            {% for ethnicity in ethnicities %}
                                <option value="{{ ethnicity.ethnicity_id }}">{{ ethnicity.ethnicity_name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </label>
                </p>

                <p>
                <label>Religion<br>
                    <input type="radio" id="rel_d_matter" name="rel" value=0 checked> Doesn't Matter
                    <input type="radio" id="rel_matter" name="rel" value=1> Matters<br>
                    <div id="show-religions">
                        <select name="religions" multiple>
                            {% for religion in religions %}
                                <option value="{{ religion.religion_id }}">{{ religion.religion_name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </label>  
                </p> 

                <p>
                    <input type="submit" value="SEARCH">
                </p>

            </form>

          </div>
        </div>
    </div>

    
{% endblock %}
{% block javascript %}

    <script>   
        function checkNotifications() {
            let notifications = {{ new_requests }} + {{ new_responses }};
            if( notifications > 0) {
                let new_string = '<b>(' + notifications + ')</b>';
                $('#notification').html(new_string);
            }
            if ({{ new_requests }} > 0) {
                let new_string = '<b>(' + {{ new_requests }} + 'new requests)</b>';
                $('#received').html(new_string);
            }
            if ({{ new_responses }} > 0) {
                let new_string = '<b>(' + {{ new_responses }} + 'new responses)</b>';
                $('#sent').html(new_string);
            }
            if ({{ new_messages }} > 0) {
                let new_string = '<b>(' + {{ new_messages }} + ')</b>';
                $('#msg').html(new_string);
            }
        }
    </script>
    <script src="/static/js/my-homepage.js"></script>

{% endblock %}