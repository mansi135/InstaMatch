{% extends 'base.html' %}

{% block title %}My Profile{% endblock %}

{% block head %}
{% endblock %}

{% block content %}
    <h1> {{ user.fname }} {{ user.lname }} </h1>

    <br><br>
    <!-- {% for pic in user.pictures %}
        <img src="/{{ pic.picture_url }}">
    {% endfor %} -->
    <div id="personal">
        <img src="/{{ pic_url }}">
        <h3>Personal Info</h3>
        <ul>
            <li> Gender : {{ user.personal.gender }} </li>
            <li id="dob">Date of Birth : {{ user.personal.dob }}</li>
            <li id="age"></li>
            <li> Height : {{ user.personal.height }} cm</li>
            <li> About {{ user.fname }} : {{ user.personal.aboutme }} </li>
            <li> Ethnicity : {{ user.personal.ethnicity.ethnicity_name }} </li>
            <li> Religion : {{ user.personal.religion.religion_name }} </li>
        </ul>      
    </div>

    <div id="contact-info">
        <h3>Contact Info</h3>
        <ul>
            <li> Address : {{ user.contact.street_address }} </li>
            <li> City : {{ user.contact.city }} </li>
            <li> Zipcode : {{ user.contact.zipcode }} </li>
            <li> Phone Number : {{ user.contact.phone }} </li>
            <li> Email : {{ user.email }}</li>
        </ul>
    </div>
    
    <div id="professional">
        <h3>Professional Info</h3>
        <ul>
            <li> Education : {{ user.professional.education}} </li>
            <li> Occupation : {{ user.professional.occupation}} </li>
            <li> Employer : {{ user.professional.employer}} </li>
        </ul>
        
    </div>

    <div id="interests">
        <h3>Interests</h3>
            <ul>
            {% for interest in user.interests %}
                <li> interest </li>
            {% endfor %}
    </div>

    <button>Edit</button>
    

{% endblock %}

{% block javascript %}
    <script>
    
    function calcAge(dob) {

        var today = new Date();
        var birthDate = new Date(dob);
        var age = today.getFullYear() - birthDate.getFullYear();
        var m = today.getMonth() - birthDate.getMonth();
        if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
            age = age-1;
        }
        return age;
    }
    
    $(document).ready(function() { 

        let age = calcAge($('#dob').html()) + ' years old';  
        $('#age').html(age);

        // if(' user_type ' !== 'self') {
        //     $('#contact-info').hide();
        // } else {
        //     $('#contact-info').show();
        // }

        // status is status of any user wrt current_user
        // contact_type is the type of connection of current_user with contacted-user
        // if status === Accepted
        //     show status
        //     show contact-info
        //     show message-button
        // if status === Pending
        //     show status
        //     hide contact-info
        //     if contact_type === 'source'
        //         show accept-btn
        //         show pass-btn
        //     if contact_type === 'target'
        //         <Do nothing>
        // if status === Passed
        //     show status
        //     hide contact-info
        // if status === new
        //     hide status
        //     hide contact-info
        //     show send-request-btn
        //     show mark-fav-btn
        // if status === none (self)
        //     hide status
        //     show contact-info
        //     show edit-button

    });
    </script>

{% endblock %}